# Vue SPA Template

A Vue SPA template that includes many useful boilerplate customisations.

This repository differs from the code generated by the `vue init` cli command by a number of aspects. 
* Includes some files specifically for building and hosting the app on [GitHub Pages](https://pages.github.com/)
* Template home page layout with news and navigation
* [Vue Router](https://router.vuejs.org/) boilerplate including dynamic loading of static content
* [Vuetify](https://vuetifyjs.com/en/) Material Design Component Framework
* [Vue Test Utils](https://vue-test-utils.vuejs.org/) basic test for the navigation Vue
* TypeScript descriptors for various modules
* A global SCSS file
* Custom configuration for Prettier, Vue, and TypeScript
* Custom index.html file with various improvements 

### GitHub Pages
To support history mode of Vue Router, a [custom 404.html](https://github.com/innovate-invent/spa_template/blob/master/public/404.html) file is provided that does a content redirect to the SPA root.
This is loosely based on [the work done by Daniel Buchner](http://www.backalleycoder.com/2016/05/13/sghpa-the-single-page-app-hack-for-github-pages/).
Index.html has been [extended](https://github.com/innovate-invent/spa_template/blob/05c60fee99dd617b934e1811dcbe013d41a7c048/public/index.html#L4-L24) to force https and disable the GitHub pages functionality for non-production environments.

A simple GitHub Actions [deployment script](https://github.com/innovate-invent/spa_template/blob/master/.github/workflows/nodejs.yml) is provided. 
You must [set the GH_PAT secret](https://github.com/marketplace/actions/deploy-to-github-pages-with-container) on the repository for this to work.   


### Vue Router
The [`@/router/`](https://github.com/innovate-invent/spa_template/blob/master/src/router/) folder contains modules that 
are dynamically (recursively) imported by `@/router/index.ts`. Add new routes by either modifying `@/router/main.ts` or creating a new
ts module in the folder that default exports a list of RouteConfigs.

`@/router/static.ts` imports all `*.md` files in the [static folder](https://github.com/innovate-invent/spa_template/tree/master/static) (aliased to `#/`) using the
[frontmatter-markdown-loader](https://hmsk.github.io/frontmatter-markdown-loader/) which is [configured](https://github.com/innovate-invent/spa_template/blob/05c60fee99dd617b934e1811dcbe013d41a7c048/vue.config.js#L19-L43) to import
the markdown files and their [front matter](https://jekyllrb.com/docs/front-matter/) as HTML and Vue components. All front matter values are bound
to the routes meta and props fields.

All routes are checked for a `nav` [meta field](https://router.vuejs.org/guide/advanced/meta.html) of numeric type and sorted based on that value. 
The [Navigation](https://github.com/innovate-invent/spa_template/blob/master/src/components/Navigation.vue) component lists
any page in sorted order omitting any page that does not have the `nav` meta field.


### News
Similarly to the way the router config dynamically loads all `*.md` files in `#/` all `*.md` files in `#/news/` are loaded and listed
by the [News](https://github.com/innovate-invent/spa_template/blob/master/src/components/News.vue) component.
News markdown files are expected to have the following front matter: 
```md
---
title: News title
date: 2020-04-11
---
```
The `date` attribute is parsed and sorted so the most recent post is first.


## Project setup
```
yarn install
```

### Compiles and hot-reloads for development
```
yarn serve
```

### Compiles and minifies for production
```
yarn build
```

### Run your unit tests
```
yarn test:unit
```

### Lints and fixes files
```
yarn lint
```

### Customize configuration
See [Configuration Reference](https://cli.vuejs.org/config/).
